<div class="home-container">
  <div class="home-card card-wide">

    <div style="display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #eee; padding-bottom: 15px; margin-bottom: 20px;">
      <h2 style="margin: 0; color: #333;">Tarefa #<%= @task.id %></h2>
      <%= link_to "‚Üê Voltar", tasks_path, class: "link-muted" %>
    </div>

    <div class="grid-2-col">
      <div>
        <span class="text-label">T√≠tulo</span>
        <p class="text-value"><%= @task.title %></p>
      </div>

      <div>
        <span class="text-label">Status Atual</span>
        <div style="margin-top: 5px;">
          <span class="badge" style="
            background-color: <%= @task.pending? ? '#fff3cd' : (@task.concluded? ? '#d1e7dd' : '#f8d7da') %>;
            color: <%= @task.pending? ? '#856404' : (@task.concluded? ? '#0f5132' : '#721c24') %>;">
            <%= @task.status.humanize.upcase %>
          </span>
        </div>
      </div>
    </div>

    <div style="margin-bottom: 30px;">
      <span class="text-label">URL do An√∫ncio</span>
      <div style="background: #f9f9f9; padding: 10px; border-radius: 4px; border: 1px solid #eee; margin-top: 5px; word-break: break-all;">
        <a href="<%= @task.url %>" target="_blank" style="color: #0d6efd; text-decoration: none;"><%= @task.url %> üîó</a>
      </div>
    </div>

    <div style="margin-bottom: 30px;">
      <span class="text-label">Dados Coletados (Scraping)</span>

      <% if @task.result_data.present? %>
        <div class="code-block">
          <pre style="margin: 0;"><%= JSON.pretty_generate(@task.result_data) rescue @task.result_data %></pre>
        </div>
      <% else %>
        <div class="empty-state-box">
          <% if @task.failed? %>
            <p>‚ùå Ocorreu um erro ao processar esta tarefa.</p>
          <% else %>
            <p>‚è≥ Aguardando processamento...</p>
          <% end %>
        </div>
      <% end %>
    </div>

    <div style="border-top: 1px solid #eee; padding-top: 20px; display: flex; justify-content: flex-end;">
      <%= link_to "Editar", edit_task_path(@task), class: "btn btn-secondary" %>

      <%= link_to "Excluir Tarefa", task_path(@task),
          class: "btn btn-danger",
          data: { turbo_method: :delete, turbo_confirm: "Tem certeza que deseja apagar permanentemente?" } %>
    </div>

  </div>
</div>